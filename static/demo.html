<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Feed2Podcast WebUI - Demo</title>
    <meta name="description" content="Demonstrate available TTS Voices." />
    <meta name="author" content="LufixSch" />
    <meta property="og:title" content="Feed2Podcast WebUI - Demo" />
    <meta
      property="og:description"
      content="Demonstrate available TTS Voices."
    />
    <meta property="og:type" content="website" />
  </head>
  <body>
    <form id="demoForm">
      <label for="voiceSelect">
        <h2>Select a Voice:</h2>
      </label>
      <select id="voiceSelect" name="voiceSelect" required></select>

      <button type="submit">Play Demo</button>

      <div id="audioPlayerContainer">
        <audio
          id="demoAudio"
          controls
          style="width: 100%; display: none"
        ></audio>
      </div>
    </form>

    <script>
      const API_BASE = "";

      document.addEventListener("DOMContentLoaded", async function () {
        try {
          const response = await fetch(`/api/demo`);
          if (!response.ok) throw new Error("Failed to load available voices.");

          const voices = await response.json();
          const select = document.getElementById("voiceSelect");
          for (const voice of voices) {
            const option = document.createElement("option");
            option.value = voice;
            option.textContent = voice;
            select.appendChild(option);
          }
        } catch (error) {
          console.error(error);
          alert("Could not load available voices.");
        }
      });

      document
        .getElementById("demoForm")
        .addEventListener("submit", async function (e) {
          e.preventDefault();
          const selectedVoice = document.getElementById("voiceSelect").value;

          try {
            const response = await fetch(`/api/demo/${selectedVoice}`);
            if (!response.ok)
              throw new Error(
                `Failed to load demo for voice "${selectedVoice}"`,
              );

            const blob = await response.blob();
            const audioUrl = URL.createObjectURL(blob);
            const audioPlayer = document.getElementById("demoAudio");
            audioPlayer.src = audioUrl;
            audioPlayer.style.display = "block";
            audioPlayer.play();
          } catch (error) {
            console.error(error);
            alert(`Failed to load demo for voice "${selectedVoice}".`);
          }
        });
    </script>

    <style>
      body {
        font-family:
          -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu,
          Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
        background-color: #f9f9f9;
        color: #333;
        margin: 0;
        padding: 2rem;
      }

      h2 {
        font-size: 16px;
        margin-bottom: 0.5rem;
      }

      form {
        max-width: 500px;
        margin: auto;
        background-color: white;
        padding: 2rem;
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.05);
      }

      select,
      button {
        width: 100%;
        margin-bottom: 1.5rem;
        padding: 0.75rem;
        border-radius: 4px;
        border: 1px solid #ccc;
        font-size: 16px;
      }

      button[type="submit"] {
        background-color: #007bff;
        color: white;
        border: none;
        cursor: pointer;
      }

      button[type="submit"]:hover {
        background-color: #0056b3;
      }

      @media (prefers-color-scheme: dark) {
        body {
          background-color: #1a1a1a;
          color: #f9f9f9;
        }

        form {
          background-color: #2c2c2c;
          box-shadow: 0 0 10px rgba(255, 255, 255, 0.05);
        }

        select,
        button {
          border-color: #444;
          background-color: #3c3c3c;
          color: #f9f9f9;
        }

        button[type="submit"] {
          background-color: #007bff;
        }

        button[type="submit"]:hover {
          background-color: #0056b3;
        }
      }
    </style>
  </body>
</html>
